<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Form Filler Prompt Generator</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root {
    --bg:#f6f7f9; --card:#fff; --accent:#007aff; --muted:#666;
  }
  * { box-sizing:border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
  body { margin:0; background:var(--bg); color:#000; }
  header { background:var(--accent); color:#fff; padding:1rem; text-align:center; }
  main { max-width:800px; margin:2rem auto; background:var(--card); padding:1.5rem; border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,.1); }
  h2 { margin-top:0; }
  label { display:block; margin:.8rem 0 .3rem; font-weight:500; }
  input[type=text], select, textarea, input[type=number] {
    width:100%; padding:.6rem; border:1px solid #ccc; border-radius:8px;
  }
  textarea { height:120px; }
  button { background:var(--accent); color:#fff; border:0; padding:.6rem 1.2rem; border-radius:8px; cursor:pointer; margin-top:1rem; }
  .output { margin-top:2rem; padding:1rem; background:#f0f0f0; border-radius:8px; white-space:pre-wrap; font-family:monospace; }
  .row { display:flex; gap:1rem; }
  .row > div { flex:1; }
  .sig-pad { border:1px solid #aaa; width:100%; height:120px; }
</style>
</head>
<body>
<header>
  <h1>Form Filler Prompt Generator</h1>
</header>
<main>
  <h2>Define a Field</h2>
  <label>Label</label>
  <input type="text" id="fieldLabel" placeholder="e.g. Policy Number" />

  <label>Input Type</label>
  <select id="fieldType">
    <option value="text">Text</option>
    <option value="select">Dropdown</option>
    <option value="radio">Radio</option>
    <option value="signature">Signature Section</option>
  </select>

  <div id="optionsBlock" style="display:none;">
    <label>Options (comma-separated)</label>
    <input type="text" id="fieldOptions" placeholder="e.g. Single, Married, Divorced" />
  </div>

  <div id="repeatBlock" style="display:none;">
    <label><input type="checkbox" id="repeatable" /> Repeatable Section?</label>
    <div id="repeatModeBlock" style="display:none;">
      <label>Mode</label>
      <select id="repeatMode">
        <option value="unlimited">Unlimited (+ Add button)</option>
        <option value="fixed">Fixed Count</option>
      </select>
      <div id="repeatCountBlock" style="display:none;">
        <label>How many repeats?</label>
        <input type="number" id="repeatCount" min="1" value="1" />
      </div>
    </div>
  </div>

  <button onclick="addField()">Add Field</button>

  <h2>Generated Code</h2>
  <div class="output" id="output"></div>
</main>

<script>
let fields = [];

document.getElementById("fieldType").addEventListener("change", function() {
  document.getElementById("optionsBlock").style.display =
    (this.value === "select" || this.value === "radio") ? "block" : "none";
  document.getElementById("repeatBlock").style.display =
    (this.value !== "signature") ? "block" : "none";
});

document.getElementById("repeatable").addEventListener("change", function() {
  document.getElementById("repeatModeBlock").style.display = this.checked ? "block" : "none";
});

document.getElementById("repeatMode").addEventListener("change", function() {
  document.getElementById("repeatCountBlock").style.display =
    this.value === "fixed" ? "block" : "none";
});

function addField() {
  const label = document.getElementById("fieldLabel").value.trim();
  const type = document.getElementById("fieldType").value;
  const options = document.getElementById("fieldOptions").value.trim();
  const repeatable = document.getElementById("repeatable").checked;
  const repeatMode = document.getElementById("repeatMode").value;
  const repeatCount = document.getElementById("repeatCount").value;

  let field = { label, type, options: options.split(",").map(o=>o.trim()).filter(Boolean) };

  if (repeatable) {
    field.repeatable = true;
    field.repeatMode = repeatMode;
    if (repeatMode === "fixed") field.repeatCount = parseInt(repeatCount);
  }

  fields.push(field);
  renderOutput();
  document.getElementById("fieldLabel").value = "";
  document.getElementById("fieldOptions").value = "";
  document.getElementById("repeatable").checked = false;
  document.getElementById("repeatModeBlock").style.display="none";
  document.getElementById("repeatCountBlock").style.display="none";
}

function renderOutput() {
  let html = `<form>\n`;
  fields.forEach((f,i)=>{
    if (f.type==="text") {
      html += `  <label>${f.label}<input type="text" id="field${i}"></label>\n`;
    }
    else if (f.type==="select") {
      html += `  <label>${f.label}<select id="field${i}">\n`;
      f.options.forEach(opt=>{ html += `    <option value="${opt}">${opt}</option>\n`; });
      html += `  </select></label>\n`;
    }
    else if (f.type==="radio") {
      html += `  <fieldset><legend>${f.label}</legend>\n`;
      f.options.forEach(opt=>{
        html += `    <label><input type="radio" name="field${i}" value="${opt}"> ${opt}</label>\n`;
      });
      html += `  </fieldset>\n`;
    }
    else if (f.type==="signature") {
      html += `  <fieldset><legend>${f.label}</legend>\n`;
      html += `    <label>Name<input type="text" id="sigName${i}"></label>\n`;
      html += `    <label>IC<input type="text" id="sigIC${i}"></label>\n`;
      html += `    <label>State<input type="text" id="sigState${i}"></label>\n`;
      html += `    <div class="row">\n`;
      html += `      <div><label>Date<input type="number" id="sigDate${i}" min="1" max="31"></label></div>\n`;
      html += `      <div><label>Month<input type="text" id="sigMonth${i}"></label></div>\n`;
      html += `      <div><label>Year<input type="number" id="sigYear${i}" min="1900" max="2100"></label></div>\n`;
      html += `    </div>\n`;
      html += `    <canvas class="sig-pad" id="sigPad${i}"></canvas>\n`;
      html += `  </fieldset>\n`;
    }
  });
  html += `</form>`;
  document.getElementById("output").textContent = html;
}
</script>
</body>
</html>
